---
import "photoswipe/dist/photoswipe.css";
import "photoswipe-dynamic-caption-plugin/photoswipe-dynamic-caption-plugin.css";
import { Image } from 'astro:assets';
import portfolio1 from "../assets/portfolio-1.jpg";
import portfolio2 from "../assets/portfolio-2.jpg";
import portfolio3 from "../assets/portfolio-3.jpg";
import portfolio4 from "../assets/portfolio-4.jpg";
---

<div id="gallery" class="row g-4">
  <div
    class="col-12 pswp-gallery__item"
    data-pswp-src={portfolio1}
    data-pswp-width="1200"
    data-pswp-height="800"
  >
    <div class="portfolio-iteam">
      <a
        href={portfolio1}
        data-pswp-width="1669"
        data-pswp-height="2500"
        target="_blank"
        class="btn btn-primary btn-lg">View Gallery</a
      >
    </div>
  </div>
  <!-- <div
        class="col-md-3 pswp-gallery__item"
        data-pswp-src="/portfolio-1.jpg"
        data-pswp-width="1200"
        data-pswp-height="800"
      >
        <a
          href="https://cdn.photoswipe.com/photoswipe-demo-images/photos/2/img-2500.jpg"
          data-pswp-width="1669"
          data-pswp-height="2500"
          target="_blank"
        >
          <img
            src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/2/img-200.jpg"
            alt=""
          />
        </a>
      </div> -->

  <div
    class="col-md-3 pswp-gallery__item"
    data-pswp-src={portfolio1}
    data-pswp-width="1200"
    data-pswp-height="800"
  >
    <div class="portfolio-item">
      <a
        href={portfolio1}
        data-pswp-width="1669"
        data-pswp-height="2500"
        target="_blank"
      >
        <Image src={portfolio1} alt="Weddings" class="img-fluid" />
        <h4>Weddings</h4>
      </a>
    </div>

    <!-- without thumbnail -->
    <div class="pswp-gallery__item">
      <!-- position-absolute -->
      <a
        data-pswp-src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/5/img-2500.jpg"
        data-pswp-width="2500"
        data-pswp-height="1668"
        target="_blank"></a>
    </div>
  </div>

  <div
    class="col-md-3 pswp-gallery__item"
    data-pswp-src={portfolio2}
    data-pswp-width="1200"
    data-pswp-height="800"
  >
    <div class="portfolio-item">
      <a
        href={portfolio2}
        data-pswp-width="1669"
        data-pswp-height="2500"
        target="_blank"
      >
        <Image src={portfolio2} alt="Corporate Events" class="img-fluid" />
      </a>
      <h4>Corporate Events</h4>
    </div>
  </div>
  <div
    class="col-md-3 pswp-gallery__item"
    data-pswp-src={portfolio3}
    data-pswp-width="1200"
    data-pswp-height="800"
  >
    <div class="portfolio-item">
      <a
        href={portfolio3}
        data-pswp-width="1669"
        data-pswp-height="2500"
        target="_blank"
      >
        <Image src={portfolio3} alt="Birthdays" class="img-fluid" />
      </a>
      <h4>Birthdays</h4>
    </div>
  </div>
  <div
    class="col-md-3 pswp-gallery__item"
    data-pswp-src={portfolio4}
    data-pswp-width="1200"
    data-pswp-height="800"
  >
    <div class="portfolio-item">
      <a
        href={portfolio4}
        data-pswp-width="1669"
        data-pswp-height="2500"
        target="_blank"
      >
        <Image src={portfolio4} alt="Special Events" class="img-fluid" />
      </a>
      <h4>Special Events</h4>
    </div>
  </div>

  <style>
    .portfolio-item {
      position: relative;
      overflow: hidden;
      margin: 0;
      border-radius: 1rem;

      & img {
        object-fit: cover;
        width: 100%;
        height: 100%;
        transition: all 0.3s ease;
        transform: scale(1);
      }
      & h4 {
        color: #fff;
        z-index: 50;
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        padding-block: 1rem;
        margin: 0;
      }

      &:hover,
      &:focus {
        & img {
          transform: scale(1.1);
        }
      }
    }
    .portfolio-item:before {
      content: " ";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      background: linear-gradient(
        180deg,
        rgba(0, 0, 0, 0),
        80%,
        rgba(199, 151, 135, 0.8) 92.5%,
        #c79787 100%
      );
      /* background: red; */
      z-index: 45;
      opacity: 1;
    }

    .pswp-gallery__item:nth-child(odd):not(:first-child) {
        margin-top: 6rem;
    }
  </style>

<script is:inline type="module">
  import PhotoSwipeLightbox from "./node_modules/photoswipe/dist/photoswipe-lightbox.esm.js";
  import PhotoSwipeDynamicCaption from "./node_modules/photoswipe-dynamic-caption-plugin/photoswipe-dynamic-caption-plugin.esm.js";
  import PhotoSwipe from "./node_modules/photoswipe/dist/photoswipe.esm.js";

  const lightbox = new PhotoSwipeLightbox({
    gallery: "#gallery",
    children: ".pswp-gallery__item",
    pswpModule: () =>
      import("./node_modules/photoswipe/dist/photoswipe.esm.js"),
    paddingFn: (viewportSize) => ({
      top: 30,
      bottom: 30,
      left: 70,
      right: 70,
    }),
  });

  new PhotoSwipeDynamicCaption(lightbox, {
    type: "auto",
    captionContent: ".pswp-caption-content",
    mobileLayoutBreakpoint: 768,
  });

  lightbox.init();
</script>

<style>
  .pswp-caption-content {
    text-align: center;
    font-size: 1.1rem;
    padding: 15px;
  }
</style>
